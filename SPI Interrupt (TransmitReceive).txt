uint8_t tx_data = 0xAA;
uint8_t rx_data;

int main(void)
{
    HAL_Init();
    SystemClock_Config();
    MX_GPIO_Init();
    MX_SPI1_Init();

    HAL_SPI_TransmitReceive_IT(&hspi1, &tx_data, &rx_data, 1);

    while(1)
    {
        // main loop idle
    }
}

void HAL_SPI_TxRxCpltCallback(SPI_HandleTypeDef *hspi)
{
    if(hspi->Instance == SPI1)
    {
        // Transmission/Reception complete
    }
}
