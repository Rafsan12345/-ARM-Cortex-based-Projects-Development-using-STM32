uint32_t adc_buffer[10];

int main(void)
{
    HAL_Init();
    SystemClock_Config();
    MX_GPIO_Init();
    MX_ADC1_Init();
    MX_DMA_Init();

    HAL_ADC_Start_DMA(&hadc1, adc_buffer, 10);

    while(1)
    {
        // main loop idle
    }
}

// DMA conversion complete callback
void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)
{
    if(hadc->Instance == ADC1)
    {
        HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
    }
}
